@startuml

object "referents[i]: SubprocessInstance" as instance
instance : identity = <hash>
instance : type = ["scalems", "Subprocess"]
instance : input = <hash>
instance : result = <hash>

object "referents[i-1]: SubprocessInput" as input
input : identity = <hash>
input : type = ["scalems", "SubprocessInput"]
input : argv = ["myprogram", "--num_threads", "8", "-i", "infile", "-o", "outfile"]
input : inputs = {"path": input_files.identity}
input : outputs = {"path": output_files.identity}
input : stdin = <null ref>
input : environment = empty
input : resources = {"path": resource_spec.identity}

object "artifacts[j]: SubprocessResult" as result
result : identity = <hash>
result : type = ["scalems", "SubprocessResult"]
result : exitcode = 0
result : stdout = <fileref>
result : stderr = <fileref>
result : file = {"-o": <fileref>}

object "input_files: Mapping" as input_files
input_files : identity = <hash>
input_files : type = ["scalems", "Mapping"]
input_files : data = {"-i": "infile"}

object "output_files: Mapping" as output_files
output_files : identity = <hash>
output_files : type = ["scalems", "Mapping"]
output_files : data = {"-o": "outfile"}

object "resource_spec: Mapping" as resources
resources : identity = <hash>
resources : type = ["scalems", "Mapping"]
resources : data = {"ncpus": 8, "launch_method": "exec"}

input -- instance
instance .. result
input -- input_files
input -- output_files
input -- resources


'input *. input_type
'result *. result_type

'instance *. subprocesstype

'subprocesstype .> input_type

'subprocesstype .> result_type

@enduml